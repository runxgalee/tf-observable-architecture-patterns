# =============================================================================
# Centralized Secrets Management Configuration
# =============================================================================
# This configuration creates Secret Manager secret containers for all project
# secrets including GitHub Actions, monitoring, and architecture-specific needs.
#
# IMPORTANT: This only creates empty secret containers. You must populate
# secret data manually using gcloud CLI after terraform apply.
# =============================================================================

# GCP Project ID where secrets will be created
project_id = "your-gcp-project-id"

# =============================================================================
# Secrets Configuration
# =============================================================================
# Define all secrets needed across your infrastructure.
# Each secret key should follow the format: "{environment}-{name}"
# Each secret requires:
#   - environment: Environment name (dev, prod, staging, etc.)
#   - description: What this secret contains
#   - service_accounts: List of service account emails that need access
# =============================================================================

secrets = {
  # ---------------------------------------------------------------------------
  # GitHub Actions Secrets - Dev Environment
  # ---------------------------------------------------------------------------
  "dev-wif-service-account" = {
    environment = "dev"
    description = "GitHub Actions Workload Identity Federation service account email for dev"
    service_accounts = [
      "github-actions-terraform@your-gcp-project-id.iam.gserviceaccount.com"
    ]
  }

  "dev-tf-state-bucket" = {
    environment = "dev"
    description = "Terraform state bucket name for dev CI/CD pipelines"
    service_accounts = [
      "github-actions-terraform@your-gcp-project-id.iam.gserviceaccount.com"
    ]
  }

  # ---------------------------------------------------------------------------
  # GitHub Actions Secrets - Prod Environment
  # ---------------------------------------------------------------------------
  "prod-wif-service-account" = {
    environment = "prod"
    description = "GitHub Actions Workload Identity Federation service account email for prod"
    service_accounts = [
      "github-actions-terraform@your-gcp-project-id.iam.gserviceaccount.com"
    ]
  }

  "prod-tf-state-bucket" = {
    environment = "prod"
    description = "Terraform state bucket name for prod CI/CD pipelines"
    service_accounts = [
      "github-actions-terraform@your-gcp-project-id.iam.gserviceaccount.com"
    ]
  }

  # ---------------------------------------------------------------------------
  # Monitoring Secrets - Dev Environment
  # ---------------------------------------------------------------------------
  # Uncomment and configure as needed

  # "dev-slack-webhook-url" = {
  #   environment = "dev"
  #   description = "Slack webhook URL for dev alert notifications"
  #   service_accounts = [
  #     "dev-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # "dev-datadog-api-key" = {
  #   environment = "dev"
  #   description = "Datadog API key for dev metrics and logs"
  #   service_accounts = [
  #     "dev-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # ---------------------------------------------------------------------------
  # Monitoring Secrets - Prod Environment
  # ---------------------------------------------------------------------------

  # "prod-slack-webhook-url" = {
  #   environment = "prod"
  #   description = "Slack webhook URL for prod alert notifications"
  #   service_accounts = [
  #     "prod-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # "prod-pagerduty-integration-key" = {
  #   environment = "prod"
  #   description = "PagerDuty integration key for critical production alerts"
  #   service_accounts = [
  #     "prod-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # "prod-datadog-api-key" = {
  #   environment = "prod"
  #   description = "Datadog API key for prod metrics and logs"
  #   service_accounts = [
  #     "prod-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # ---------------------------------------------------------------------------
  # Architecture-Specific Secrets - Dev Environment
  # ---------------------------------------------------------------------------
  # Add secrets for your architecture patterns here

  # Event-Driven Pattern - Dev
  # "dev-event-driven-api-key" = {
  #   environment = "dev"
  #   description = "API key for dev event-driven pattern external service integration"
  #   service_accounts = [
  #     "dev-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # Microservices GKE Pattern - Dev
  # "dev-microservices-database-url" = {
  #   environment = "dev"
  #   description = "Database connection string for dev microservices pattern"
  #   service_accounts = [
  #     "dev-microservices-api@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # "dev-microservices-redis-password" = {
  #   environment = "dev"
  #   description = "Redis password for dev microservices caching layer"
  #   service_accounts = [
  #     "dev-microservices-cache@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # Workflow Batch Pattern - Dev
  # "dev-workflow-batch-sftp-credentials" = {
  #   environment = "dev"
  #   description = "SFTP credentials for dev workflow batch data ingestion"
  #   service_accounts = [
  #     "dev-workflow-batch-job@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # ---------------------------------------------------------------------------
  # Architecture-Specific Secrets - Prod Environment
  # ---------------------------------------------------------------------------

  # Event-Driven Pattern - Prod
  # "prod-event-driven-api-key" = {
  #   environment = "prod"
  #   description = "API key for prod event-driven pattern external service integration"
  #   service_accounts = [
  #     "prod-event-driven-cloudrun@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # Microservices GKE Pattern - Prod
  # "prod-microservices-database-url" = {
  #   environment = "prod"
  #   description = "Database connection string for prod microservices pattern"
  #   service_accounts = [
  #     "prod-microservices-api@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # "prod-microservices-redis-password" = {
  #   environment = "prod"
  #   description = "Redis password for prod microservices caching layer"
  #   service_accounts = [
  #     "prod-microservices-cache@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }

  # Workflow Batch Pattern - Prod
  # "prod-workflow-batch-sftp-credentials" = {
  #   environment = "prod"
  #   description = "SFTP credentials for prod workflow batch data ingestion"
  #   service_accounts = [
  #     "prod-workflow-batch-job@your-gcp-project-id.iam.gserviceaccount.com"
  #   ]
  # }
}

# =============================================================================
# Additional Configuration
# =============================================================================

# Optional: Additional labels to apply to all secrets
# Useful for cost tracking, team ownership, etc.
additional_labels = {
  # team        = "platform-engineering"
  # cost_center = "engineering"
}

# =============================================================================
# Post-Apply Instructions
# =============================================================================
# After running 'terraform apply', populate secret data using gcloud CLI:
#
# 1. GitHub Actions secrets (dev):
#    echo -n "github-actions-terraform@project.iam.gserviceaccount.com" | \
#      gcloud secrets versions add dev-wif-service-account --data-file=-
#
#    echo -n "your-terraform-state-bucket-dev" | \
#      gcloud secrets versions add dev-tf-state-bucket --data-file=-
#
# 2. GitHub Actions secrets (prod):
#    echo -n "github-actions-terraform@project.iam.gserviceaccount.com" | \
#      gcloud secrets versions add prod-wif-service-account --data-file=-
#
#    echo -n "your-terraform-state-bucket-prod" | \
#      gcloud secrets versions add prod-tf-state-bucket --data-file=-
#
# 3. Monitoring secrets:
#    echo -n "https://hooks.slack.com/services/YOUR/WEBHOOK/URL" | \
#      gcloud secrets versions add dev-slack-webhook-url --data-file=-
#
# 4. Architecture secrets:
#    echo -n "your-api-key-value" | \
#      gcloud secrets versions add dev-event-driven-api-key --data-file=-
# =============================================================================
